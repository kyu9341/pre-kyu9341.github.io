---
layout: post
title: "(C) 동적 메모리 할당"
subtitle: "C"
date: 2019-10-11 17:53:12
author: kwon
categories: C/C++
---
이번에는 동적 메모리 할당에 대해 알아보겠다.

### 동적 메모리 할당이란?
#### **정적 메모리 할당**
모든 변수, 배열, 구조체 등에 대해 프로그램 실행 전에 필요한 만큼의 변수를 선언하여 사용 -> 프로그램 실행 전에 변수의 메모리 할당 크기가 정해짐

- 컴파일 과정에서 메모리 크기가 결정되는 메모리 할당 방법
- 프로그램 실행 전에, 어떤 종류의 변수를 얼마나 많이 필요로 하는지를 개발자가 미리 알아야함
- 프로그램 실행 전에 반드시 모든 변수, 배열, 구조체를 선언해야함

_문제점_
- 프로그램 실행 중에 필요에 따라 메모리 할당 크기를 늘리거나 줄일 수 없음
- 프로그램 실행 전, 메모리를 얼마나 필요로 할 것인지 정확하게 알 수 없는 경우, 메모리를 효율적으로 사용하기 어려움

#### **동적 메모리 할당**
- 프로그램을 실행하는 동안 필요한 시점에 필요한 만큼만 메모리를 할당하는 방법

  변수 이름이 없음

  컴파일 과정에서는 할당할 메모리 크기를 알 수 없음
- 메모리를 효율적으로 사용 가능
- 힙(heap) 메모리 영역 사용

- C 프로그래밍에서의 메모리 구성


<div style="width: 90%; height: 350px;">
    <img src="https://kyu9341.github.io/assets/cpointer6.png" style="width: 90%
    ; height: 350px;">
</div>

#### 동적 메모리 할당 절차
- 동적 메모리 할당을 위해서는 <stdlib.h> 파일을 include 선언해야함
- 동적 메모리 할당 : malloc() 함수

함수 원형|void * malloc(unsigend int size);
---|--------
함수 인자| 할당 받을 메모리 크기(byte 단위, sizeof()함수 이용)
반환 값| 반환 값 유형 : void형 포인터 / 할당 받은 메모리의 시작 주소를 반환 / 요청한 메모리 공간을 할당할 수 없는 경우 -> NULL 반환

- malloc()함수 사용 예

정수 4개를 저장할 수 있는 공간을 할당

일반적인 호출 형태 : malloc(4*sizeof(int));

-> 실질적인 호출 : malloc(16);

<div style="width: 70%; height: 200px;">
    <img src="https://kyu9341.github.io/assets/cpointer7.png" style="width: 70%
    ; height: 200px;">
</div>

문자 3개를 저장할 수 있는 공간을 할당

일반적인 호출 형태 : malloc(3*sizeof(char));

-> 실질적인 호출 : malloc(3);

<div style="width: 70%; height: 200px;">
    <img src="https://kyu9341.github.io/assets/cpointer8.png" style="width: 70%
    ; height: 200px;">
</div>
